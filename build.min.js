angular.module("App",["ui.router"]).config(function(e,t){t.when("/note","/note/:id").when("/","/index"),e.state("login",{url:"",templateUrl:"templates/login.html"}).state("editor",{url:"/note/:id",templateUrl:"templates/editor.html",controller:"EditorCtrl"}).state("index",{url:"/index",templateUrl:"templates/main.html"}),t.otherwise("/")}),angular.module("App").controller("EditorCtrl",function(e,t){e.params=t.params}),angular.module("App").controller("MainCtrl",function(e,t,n,o){e.login=function(){Parse.FacebookUtils.logIn(null,"pass").then(function(n){n.existed()?o.buildModel(n,function(){e.user=o.model,e.$apply()}):o.newUser(n,function(t){o.buildModel(t,function(){e.user=o.model,e.$apply()})}),t.go("index")})},e.searchString="",e.notes=[{title:"Note1",id:"84dfrhsi8tyurh8h",sample:"This, of course, was the first note, of course, a horse..."},{title:"Note2",id:"475uyrsfhwes47ts",sample:"This one is a recipe Onions Tomato 6 Apples 1 Can of..."}],e.newNote=function(){},e.logout=function(){e.user=null,o.logout()},null===o.model&&Parse.User.current()&&o.buildModel(Parse.User.current(),function(){e.user=o.model,e.$apply()}),e.$on("$locationChangeStart",function(){e.user||Parse.User.current()||t.go("login")}),e.$watch("user",function(e){e||Parse.User.current()||t.go("login")})}),angular.module("App").controller("ViewNotebookCtrl",function(e){e.params=$stateParams}),angular.module("App").factory("NoteService",function(){var e={},t=null;return e.setActive=function(e){t={title:e.title,id:e.id}},e.getActive=function(){return t},e}),angular.module("App").factory("NotebookService",function(){var e={};return e}),angular.module("App").factory("UserService",function(){var e={};return e.newUser=function(e,t){FB.api("/me",function(n){n&&!n.error&&(e.set("name",n.first_name),e.save().then(function(){t(e)}))})},e.model=null,e.buildModel=function(t){e.model={},e.model.name=t.get("name"),e.model.id=t.id},e.logout=function(){FB.getLoginStatus(function(t){t&&"connected"===t.status&&FB.logout(function(){Parse.User.logOut(),e.model=null,document.location.reload()})})},e});